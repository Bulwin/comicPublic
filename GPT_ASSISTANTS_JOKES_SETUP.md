# Настройка GPT Assistants для поддержки анекдотов

## Обзор
Для полной работы функции анекдотов необходимо обновить каждого из 5 GPT Assistants (A, B, C, D, E) в UI OpenAI, добавив возможность генерации анекдотов к существующему функционалу комиксов.

## Что нужно сделать

### Для каждого из 5 ассистентов (A, B, C, D, E):

#### 1. Обновить промпт (Instructions)
Добавить в конец существующего промпта следующий блок:

```
## НОВАЯ ВОЗМОЖНОСТЬ: Генерация анекдотов

Кроме комиксов, ты можешь создавать **анекдоты** на основе новости дня.

### Когда создавать анекдот:
- Когда пользователь явно просит анекдот
- Когда в запросе упоминается "анекдот", "шутка", "joke"
- Когда контекст указывает на необходимость текстового юмора

### Формат анекдота:
Анекдот должен быть:
- **Коротким**: 1-3 абзаца максимум
- **Связанным с новостью**: напрямую отражать тему новости
- **В твоем стиле**: используй свой уникальный стиль юмора
- **Законченным**: с четким пуантом/изюминкой

### Структура анекдота:
1. **Заголовок**: Краткий, цепляющий заголовок
2. **Содержание**: Основной текст анекдота (1-3 абзаца)
3. **Пуант**: Неожиданный поворот или изюминка в конце

### Для отправки АНЕКДОТА:
После создания анекдота ОБЯЗАТЕЛЬНО вызови функцию `submit_joke` с готовым анекдотом в JSON формате:

```json
{
  "title": "Заголовок анекдота",
  "content": "Полный текст анекдота с пуантом"
}
```

### АЛГОРИТМ РАБОТЫ:
1. **Анализируй запрос**: Определи, что нужно создать - комикс или анекдот
2. **Создавай контент**: Следуй соответствующему формату
3. **Вызывай функцию**: 
   - `submit_script` для комикса (как раньше)
   - `submit_joke` для анекдота (НОВОЕ)
4. **НЕ ЗАБЫВАЙ** вызвать соответствующую функцию в конце работы!

### Примеры определения типа запроса:
- "Создай комикс про..." → используй `submit_script`
- "Придумай анекдот про..." → используй `submit_joke`
- "Сделай сценарий..." → используй `submit_script`
- "Расскажи шутку про..." → используй `submit_joke`
- Если тип не ясен → создавай комикс (по умолчанию)
```

#### 2. Добавить новую функцию (Tools)
В разделе Functions добавить новую функцию `submit_joke`:

**Function Name:** `submit_joke`

**Description:** `Отправка готового анекдота`

**Parameters (JSON Schema):**
```json
{
  "type": "object",
  "properties": {
    "joke": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "Заголовок анекдота"
        },
        "content": {
          "type": "string", 
          "description": "Полный текст анекдота с пуантом"
        }
      },
      "required": ["title", "content"]
    }
  },
  "required": ["joke"]
}
```

## Список ассистентов для обновления

### Ассистенты-сценаристы:
1. **Ассистент A** (Добряк Петрович) - ID: `SCRIPTWRITER_A_ASSISTANT_ID`
2. **Ассистент B** (Мрачный Эдгар) - ID: `SCRIPTWRITER_B_ASSISTANT_ID`
3. **Ассистент C** (Бунтарь Макс) - ID: `SCRIPTWRITER_C_ASSISTANT_ID`
4. **Ассистент D** (Хипстер Артемий) - ID: `SCRIPTWRITER_D_ASSISTANT_ID`
5. **Ассистент E** (Филолог Вербицкий) - ID: `SCRIPTWRITER_E_ASSISTANT_ID`

## Пошаговая инструкция

### Шаг 1: Откройте OpenAI Platform
1. Перейдите на https://platform.openai.com/
2. Войдите в аккаунт
3. Перейдите в раздел "Assistants"

### Шаг 2: Для каждого ассистента
1. Найдите ассистента по ID или имени
2. Нажмите "Edit"
3. В разделе "Instructions" добавьте новый блок в конец существующего промпта
4. В разделе "Functions" добавьте новую функцию `submit_joke`
5. Сохраните изменения

### Шаг 3: Тестирование
После обновления всех ассистентов:
1. Запустите тест: `python test_jokes_generation.py`
2. Проверьте, что анекдоты генерируются реальными ассистентами, а не заглушками
3. Убедитесь, что комиксы по-прежнему работают

## Важные моменты

### ⚠️ Сохранение совместимости:
- **НЕ УДАЛЯЙТЕ** существующую функцию `submit_script`
- **НЕ ИЗМЕНЯЙТЕ** существующие инструкции для комиксов
- **ТОЛЬКО ДОБАВЛЯЙТЕ** новый функционал

### ✅ Проверка готовности:
- Все 5 ассистентов обновлены
- Функция `submit_joke` добавлена во все ассистенты
- Промпты содержат инструкции по анекдотам
- Тесты проходят без заглушек

## Результат
После выполнения всех шагов:
- ✅ Ассистенты смогут создавать и комиксы, и анекдоты
- ✅ Telegram бот будет работать с реальными AI-генерированными анекдотами
- ✅ Функция анекдотов будет готова на 100%

## Справочные файлы
- `instructions/gpt_scriptwriter_prompt_with_jokes.md` - полный обновленный промпт
- `instructions/gpt_scriptwriter_prompt.md` - оригинальный промпт для комиксов
- `JOKES_FEATURE_PLAN.md` - общий план реализации функции анекдотов
